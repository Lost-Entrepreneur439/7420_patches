From 17e5c1c191de89158b757a2c9f7259922f9466ba Mon Sep 17 00:00:00 2001
From: html6405 <peter.schelchshorn@mhs-solutions.at>
Date: Mon, 22 Nov 2021 17:45:02 +0100
Subject: [PATCH 09/14] SubscriptionController java  don't use the subscription
 workaround for fakeiccid devices,

Change-Id: I63c4c893e90be4ff63250c254284c61b0c518edc
---
 .../com/android/internal/telephony/SubscriptionController.java | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/java/com/android/internal/telephony/SubscriptionController.java b/src/java/com/android/internal/telephony/SubscriptionController.java
index 9512bf98be..d52e723d7c 100644
--- a/src/java/com/android/internal/telephony/SubscriptionController.java
+++ b/src/java/com/android/internal/telephony/SubscriptionController.java
@@ -2557,7 +2557,8 @@ public class SubscriptionController extends ISub.Stub {
         }
         if (!SubscriptionManager.isValidSubscriptionId(subId)) {
             if (DBG) logd("[getSlotIndex]- subId invalid");
-            SystemProperties.set("gsm.radioreset", "true");
+            if (!RIL.needsOldRilFeature("fakeiccid"))
+                SystemProperties.set("gsm.radioreset", "true");
             return SubscriptionManager.INVALID_SIM_SLOT_INDEX;
         }
 
-- 
2.37.1

