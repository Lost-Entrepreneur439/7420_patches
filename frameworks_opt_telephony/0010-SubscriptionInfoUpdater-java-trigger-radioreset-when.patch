From 33130802597d6badd39d4237c1a19f4faa351c49 Mon Sep 17 00:00:00 2001
From: html6405 <peter.schelchshorn@mhs-solutions.at>
Date: Mon, 22 Nov 2021 17:46:16 +0100
Subject: [PATCH 10/14] SubscriptionInfoUpdater java  trigger radioreset when
 the sim becomes unknown

Change-Id: Id4f7087678c5940bb83b12eccc24e6a9d9167cf3
---
 .../com/android/internal/telephony/SubscriptionInfoUpdater.java | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/java/com/android/internal/telephony/SubscriptionInfoUpdater.java b/src/java/com/android/internal/telephony/SubscriptionInfoUpdater.java
index 700784f728..3c47258834 100644
--- a/src/java/com/android/internal/telephony/SubscriptionInfoUpdater.java
+++ b/src/java/com/android/internal/telephony/SubscriptionInfoUpdater.java
@@ -281,6 +281,8 @@ public class SubscriptionInfoUpdater extends Handler {
                 broadcastSimApplicationStateChanged(msg.arg1, TelephonyManager.SIM_STATE_UNKNOWN);
                 updateSubscriptionCarrierId(msg.arg1, IccCardConstants.INTENT_VALUE_ICC_UNKNOWN);
                 updateCarrierServices(msg.arg1, IccCardConstants.INTENT_VALUE_ICC_UNKNOWN);
+                if (RIL.needsOldRilFeature("fakeiccid"))
+                    SystemProperties.set("gsm.radioreset", "true");
                 break;
 
             case EVENT_SIM_IO_ERROR:
-- 
2.37.1

